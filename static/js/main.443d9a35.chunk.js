(this.webpackJsonpprofilance=this.webpackJsonpprofilance||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),s=n(16),i=n.n(s),o=n(15),u=n(3),l=n(8),j=n(4);n(36);function b(e){var t=e.label,n=e.className,r=e.onClick;return Object(a.jsx)("button",{className:"customButton ".concat(n),onClick:r,children:t})}n(37);var d=Object(j.b)((function(e){return{user:e.auth}}),(function(e){return{login:function(t,n){return e(function(e,t){var n={};return"admin"===e&&"admin"===t?(n.username="admin",n.role="admin",n.isAuth=!0,n.error=""):"bob"===e&&"12345"===t?(n.username="bob",n.role="user",n.isAuth=!0,n.error=""):(n.username="",n.role="",n.isAuth=!1,n.error="Access denied"),{type:"LOGIN",payload:n}}(t,n))},logout:function(){return e({type:"LOGOUT"})}}}))((function(e){var t=e.user,n=e.onExit,c=e.login,s=e.logout,i=Object(r.useState)(""),o=Object(l.a)(i,2),u=o[0],j=(o[1],Object(r.useState)("")),d=Object(l.a)(j,2),O=d[0],h=d[1],m=Object(r.useState)(""),p=Object(l.a)(m,2),_=p[0],f=p[1];return Object(r.useEffect)((function(){t.isAuth&&n(),t.error&&f(t.error)}),[t,n]),Object(a.jsxs)("div",{className:"loginForm",children:[Object(a.jsxs)("div",{className:"loginForm__header",children:[Object(a.jsx)("h3",{className:"loginForm__title",children:"\u0412\u0445\u043e\u0434"}),Object(a.jsx)("button",{className:"loginForm__exit",onClick:function(){n(),s()},children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]}),Object(a.jsxs)("div",{className:"loginForm__content",children:[Object(a.jsx)("input",{type:"text",placeholder:"\u0418\u043c\u044f",className:"loginForm__input",onChange:function(e){f(""),h(e.target.value)}}),Object(a.jsx)("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"loginForm__input",onChange:function(e){f(""),h(e.target.value)}}),_&&Object(a.jsx)("span",{children:_}),Object(a.jsx)(b,{label:"\u0412\u043e\u0439\u0442\u0438",className:"loginForm__button",onClick:function(){u&&O?c(u,O):f("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f")}})]})]})}));n(38);var O=Object(j.b)((function(e){return{isAuth:e.auth.isAuth}}),(function(e){return{logout:function(){return e({type:"LOGOUT"})}}}))((function(e){var t=e.isAuth,n=e.logout,c=Object(r.useState)(!1),s=Object(l.a)(c,2),i=s[0],u=s[1];return Object(a.jsxs)("div",{className:"navbar",children:[Object(a.jsx)("nav",{className:"navbar__list",children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{className:"navbar__listItem",children:Object(a.jsx)(o.b,{exact:!0,to:"./",className:"navbar__link",activeClassName:"navbar__link_active",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(a.jsx)("li",{className:"navbar__listItem",children:Object(a.jsx)(o.b,{to:"./news",className:"navbar__link",activeClassName:"navbar__link_active",children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"})})]})}),t?Object(a.jsx)(b,{label:"\u0412\u044b\u0445\u043e\u0434",className:"navbar__button",onClick:function(){return n()}}):Object(a.jsx)(b,{label:"\u0412\u0445\u043e\u0434",className:"navbar__button",onClick:function(){return u(!0)}}),i&&Object(a.jsx)(d,{onExit:function(){return u(!1)}})]})}));n(40);var h=Object(j.b)((function(e){return{username:e.auth.username}}),null)((function(e){var t=e.username;return Object(a.jsx)("div",{className:"homePage",children:Object(a.jsx)("h1",{className:"homePage__welcome",children:"\u041f\u0440\u0438\u0432\u0435\u0442, ".concat(t||"\u0413\u043e\u0441\u0442\u044c")})})}));n(41);var m=Object(j.b)((function(e){return{user:e.auth}}),(function(e){return{approve:function(t){return e(function(e){return{type:"APPROVE_NEWS",payload:e}}(t))},remove:function(t){return e(function(e){return{type:"DELETE_NEWS",payload:e}}(t))}}}))((function(e){var t=e.article,n=e.newsId,r=e.user,c=e.approve,s=e.remove;return Object(a.jsxs)("div",{className:"newsArticle",children:[Object(a.jsx)("h2",{className:"newsArticle__title",children:t.title}),Object(a.jsx)("span",{className:"newsArticle__date",children:t.date}),Object(a.jsx)("p",{className:"newsArticle__text",children:t.text}),"admin"===r.role&&Object(a.jsxs)("div",{className:"newsArticle__controls",children:[t.isApproved?Object(a.jsx)("span",{className:"newsArticle__approveText",children:"\u041e\u0434\u043e\u0431\u0440\u0435\u043d\u043e"}):Object(a.jsx)(b,{label:"\u041e\u0434\u043e\u0431\u0440\u0438\u0442\u044c",className:"newsArticle__approveButton",onClick:function(){return c(n)}}),Object(a.jsx)(b,{label:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",className:"newsArticle__removeButton",onClick:function(){return s(n)}})]})]})}));n(42);var p=Object(j.b)((function(e){return{user:e.auth}}),(function(e){return{addNews:function(t,n,a){return e(function(e,t,n){return{type:"ADD_NEWS",payload:{title:e,text:t,date:"".concat((new Date).toLocaleDateString()," - ").concat((new Date).toLocaleTimeString()),author:n,isApproved:"admin"===n}}}(t,n,a))}}}))((function(e){var t=e.user,n=e.addNews,c=Object(r.useState)(!1),s=Object(l.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(""),j=Object(l.a)(u,2),d=j[0],O=j[1],h=Object(r.useState)(""),m=Object(l.a)(h,2),p=m[0],_=m[1];return Object(a.jsxs)("div",{className:"newsForm",children:[Object(a.jsx)(b,{label:i?"\u0421\u043a\u0440\u044b\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c",className:"newsForm__addButton",onClick:function(){return o((function(e){return!e}))}}),i&&Object(a.jsxs)("div",{className:"newsForm__form",children:[Object(a.jsx)("input",{type:"text",placeholder:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",className:"newsForm__input",onChange:function(e){return O(e.target.value)}}),Object(a.jsx)("textarea",{className:"newsForm__textarea",placeholder:"\u0422\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",onChange:function(e){return _(e.target.value)}}),Object(a.jsx)(b,{label:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",className:"newsForm__submitButton",onClick:function(){n(d,p,t.username),o(!1)}})]})]})}));n(43);var _=Object(j.b)((function(e){return{articles:e.news,user:e.auth}}),null)((function(e){var t=e.articles,n=e.user,c=Object(r.useState)([]),s=Object(l.a)(c,2),i=s[0],o=s[1];return Object(r.useEffect)((function(){var e=[];t.filter((function(e){return e.isApproved||e.author===n.username||"admin"===n.role})).forEach((function(t,n){e.push(Object(a.jsx)(m,{article:t,newsId:n},n))})),o(e)}),[t,n]),Object(a.jsxs)("div",{className:"news",children:[Object(a.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u043e\u0432\u043e\u0441\u0442\u044f\u043c",className:"news__search",onChange:function(e){return function(e){var n=[];t.filter((function(t){return t.title.includes(e)||t.text.includes(e)})).forEach((function(e,t){n.push(Object(a.jsx)(m,{article:e,newsId:t},t))})),o(n)}(e.target.value)}}),n.isAuth&&Object(a.jsx)(p,{}),i]})}));var f=function(){return Object(a.jsx)(o.a,{children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(O,{}),Object(a.jsxs)(u.c,{children:[Object(a.jsx)(u.a,{path:"/news-with-redux/news",children:Object(a.jsx)(_,{})}),Object(a.jsx)(u.a,{path:"/news-with-redux",children:Object(a.jsx)(h,{})})]})]})})},x=(n(44),n(12)),v=n(26),N=n(10),w={username:"",role:"",isAuth:!1,error:""},A=[{title:"\u042d\u0442\u0443 \u043d\u043e\u0432\u043e\u0441\u0442\u044c \u043d\u0430\u043f\u0438\u0441\u0430\u043b \u0430\u0434\u043c\u0438\u043d",date:"date",text:"\u0418 \u0435\u0435 \u043d\u0435 \u043d\u0430\u0434\u043e \u0431\u044b\u043b\u043e \u043e\u0434\u043e\u0431\u0440\u044f\u0442\u044c",isApproved:!0,author:"admin"},{title:"\u042d\u0442\u0443 \u043d\u043e\u0432\u043e\u0441\u0442\u044c \u043f\u0438\u0441\u0430\u043b \u0411\u043e\u0431",date:"date",text:"\u0418 \u043e\u043d\u0430 \u0431\u044b\u043b\u0430 \u043e\u0434\u043e\u0431\u0440\u0435\u043d\u0430",isApproved:!0,author:"bob"},{title:"\u0418 \u044d\u0442\u0443 \u043d\u043e\u0432\u043e\u0441\u0442\u044c \u0442\u043e\u0436\u0435 \u043f\u0438\u0441\u0430\u043b \u0411\u043e\u0431",date:"date",text:"\u041d\u043e \u043e\u043d\u0430 \u043d\u0435 \u0431\u044b\u043b\u0430 \u043e\u0434\u043e\u0431\u0440\u0435\u043d\u0430",isApproved:!1,author:"bob"}];var g=Object(x.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(N.a)(Object(N.a)({},e),{},{username:t.payload.username,role:t.payload.role,isAuth:t.payload.isAuth,error:t.payload.error});case"LOGOUT":return Object(N.a)(Object(N.a)({},e),{},{username:"",role:"",isAuth:!1,error:""});default:return e}},news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NEWS":return[].concat(Object(v.a)(e),[{title:t.payload.title,date:t.payload.date,text:t.payload.text,author:t.payload.author,isApproved:t.payload.isApproved}]);case"APPROVE_NEWS":return e.map((function(e,n){return n===t.payload?Object(N.a)(Object(N.a)({},e),{},{isApproved:!0}):e}));case"DELETE_NEWS":return e.filter((function(e,n){return n!==t.payload}));default:return e}}}),E=Object(x.c)(g,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(j.a,{store:E,children:Object(a.jsx)(f,{})})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.443d9a35.chunk.js.map