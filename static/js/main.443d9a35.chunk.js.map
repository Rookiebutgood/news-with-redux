{"version":3,"sources":["components/CustomButton.jsx","components/LoginForm.jsx","redux/actions.js","components/Navbar.jsx","components/Home.jsx","components/NewsArticle.jsx","components/NewsForm.jsx","components/News.jsx","App.js","redux/reducers.js","index.js"],"names":["CustomButton","label","className","onClick","connect","state","user","auth","dispatch","login","username","password","payload","role","isAuth","error","type","loginAction","logout","onExit","useState","setPassword","setError","useEffect","placeholder","onChange","e","target","value","isShowPopup","setShowPopup","exact","to","activeClassName","approve","id","approveNews","remove","deleteNews","article","newsId","title","date","text","isApproved","addNews","author","Date","toLocaleDateString","toLocaleTimeString","showForm","setShowForm","setTitle","setText","prev","articles","news","articlesList","setArticlesList","tempArticles","filter","el","forEach","i","push","includes","search","App","path","initialAuth","initialNews","combineReducers","action","map","store","createStore","reducer","window","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.443d9a35.chunk.js","sourcesContent":["import '../style/CustomButton.scss'\r\n\r\nexport default function CustomButton({ label, className, onClick }) {\r\n  return (\r\n    <button className={ `customButton ${className}` } onClick={ onClick }>\r\n      { label }\r\n    </button>\r\n  )\r\n}","import { useEffect, useState } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { loginAction, logout }  from '../redux/actions';\r\n\r\nimport CustomButton from './CustomButton';\r\n\r\nimport '../style/LoginForm.scss';\r\n\r\nfunction LoginForm({ user, onExit, login, logout}) {\r\n  let [username, setUsername] = useState('');\r\n  let [password, setPassword] = useState('');\r\n  let [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    if(user.isAuth) {\r\n      onExit();\r\n    }\r\n    if(user.error) {\r\n      setError(user.error);\r\n    }\r\n  }, [user, onExit])\r\n\r\n  return(\r\n    <div className=\"loginForm\">\r\n      <div className=\"loginForm__header\">\r\n        <h3 className=\"loginForm__title\">Вход</h3>\r\n        <button \r\n          className=\"loginForm__exit\" \r\n          onClick={ () => { \r\n            onExit();\r\n            logout(); //set auth.error to ''\r\n          } }\r\n        >Закрыть</button>\r\n      </div>\r\n      <div className=\"loginForm__content\">\r\n        <input \r\n          type=\"text\"\r\n          placeholder=\"Имя\"\r\n          className=\"loginForm__input\"\r\n          onChange={ e => {setError(''); setPassword(e.target.value)} }\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Пароль\"\r\n          className=\"loginForm__input\"\r\n          onChange={ e => {setError(''); setPassword(e.target.value)} }\r\n        />\r\n        { error && <span>{error}</span> }\r\n        <CustomButton\r\n          label=\"Войти\"\r\n          className=\"loginForm__button\"\r\n          onClick={ () => {\r\n            if(username && password) {\r\n              login(username, password);\r\n            } else {\r\n              setError('Заполните все поля')\r\n            }\r\n          } }\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.auth\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    login: (username, password) => dispatch(loginAction(username, password)),\r\n    logout: () => dispatch(logout())\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm)","export function loginAction(username, password) {\r\n  let payload = {}\r\n  if(username === 'admin' && password === 'admin') { //Wow, so security\r\n    payload.username = 'admin';\r\n    payload.role = 'admin';\r\n    payload.isAuth = true;\r\n    payload.error = '';\r\n  } else if (username === 'bob' && password === '12345') {\r\n    payload.username = 'bob';\r\n    payload.role = 'user';\r\n    payload.isAuth = true;\r\n    payload.error = '';\r\n  } else {\r\n    payload.username = '';\r\n    payload.role = '';\r\n    payload.isAuth = false;\r\n    payload.error = 'Access denied'\r\n  }\r\n  return {\r\n    type: 'LOGIN',\r\n    payload : payload\r\n  }\r\n}\r\n\r\nexport function logout() {\r\n  return {\r\n    type: 'LOGOUT'\r\n  }\r\n}\r\n\r\nexport function addNews(title, text, author) {\r\n  return {\r\n    type: 'ADD_NEWS',\r\n    payload: {\r\n      title,\r\n      text,\r\n      date: `${new Date().toLocaleDateString()} - ${new Date().toLocaleTimeString()}`,\r\n      author,\r\n      isApproved: author === 'admin' ? true : false\r\n    }\r\n  }\r\n}\r\n\r\nexport function approveNews(id) {\r\n  return {\r\n    type: 'APPROVE_NEWS',\r\n    payload: id\r\n  }\r\n}\r\n\r\nexport function deleteNews(id) {\r\n  return {\r\n    type: 'DELETE_NEWS',\r\n    payload: id\r\n  }\r\n} ","import { useState } from 'react';\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { connect } from 'react-redux';\r\nimport { logout }  from '../redux/actions';\r\n\r\nimport LoginForm from './LoginForm';\r\nimport CustomButton from './CustomButton'\r\n\r\nimport '../style/Navbar.scss';\r\n\r\nfunction Navbar({ isAuth, logout }) {\r\n  let [isShowPopup, setShowPopup] = useState(false);\r\n  return (\r\n    <div className=\"navbar\">\r\n      <nav className=\"navbar__list\">\r\n        <ul>\r\n          <li className=\"navbar__listItem\">\r\n            <NavLink exact to=\"./\" className=\"navbar__link\" activeClassName=\"navbar__link_active\">\r\n              Главная\r\n            </NavLink>\r\n            </li>\r\n          <li className=\"navbar__listItem\">\r\n            <NavLink to=\"./news\" className=\"navbar__link\" activeClassName=\"navbar__link_active\">\r\n              Новости\r\n            </NavLink>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n      { isAuth ? \r\n        <CustomButton\r\n          label=\"Выход\"\r\n          className=\"navbar__button\"\r\n          onClick={ () => logout() } \r\n        />\r\n        :\r\n        <CustomButton\r\n          label=\"Вход\"\r\n          className=\"navbar__button\"\r\n          onClick={ () => setShowPopup(true) }\r\n        />\r\n      }\r\n      { isShowPopup && <LoginForm onExit={ () => setShowPopup(false) } /> }\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    isAuth: state.auth.isAuth\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    logout: () => dispatch(logout())\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Navbar)","import { connect } from 'react-redux';\r\n\r\nimport '../style/Home.scss';\r\n\r\nfunction Home({ username }) {\r\n  return (\r\n    <div className=\"homePage\">\r\n      <h1 className=\"homePage__welcome\">{ `Привет, ${username ? username : 'Гость'}` }</h1>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    username: state.auth.username\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(Home)","import { connect } from 'react-redux';\r\nimport { approveNews, deleteNews } from '../redux/actions';\r\n\r\nimport CustomButton from './CustomButton';\r\n\r\nimport '../style/NewsArticle.scss'\r\n\r\nfunction NewsArticle({ article, newsId, user, approve, remove }) {\r\n  \r\n  return (\r\n      <div className=\"newsArticle\">\r\n      <h2 className=\"newsArticle__title\">{ article.title }</h2>\r\n      <span className=\"newsArticle__date\">{ article.date }</span>\r\n      <p className=\"newsArticle__text\">{ article.text }</p>\r\n      { user.role === 'admin' &&\r\n        <div className=\"newsArticle__controls\">\r\n          { article.isApproved ? \r\n            <span className=\"newsArticle__approveText\">Одобрено</span>\r\n            :\r\n            <CustomButton\r\n              label=\"Одобрить\"\r\n              className=\"newsArticle__approveButton\"\r\n              onClick={ () => approve(newsId) }\r\n            />\r\n          }\r\n          <CustomButton\r\n            label=\"Удалить\"\r\n            className=\"newsArticle__removeButton\"\r\n            onClick={ () => remove(newsId) }\r\n          />\r\n        </div>\r\n      }\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.auth\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    approve: (id) => dispatch(approveNews(id)),\r\n    remove: (id) => dispatch(deleteNews(id)),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NewsArticle)","import { useState } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { addNews } from '../redux/actions';\r\n\r\nimport CustomButton from './CustomButton';\r\n\r\nimport '../style/NewsForm.scss';\r\n\r\nfunction NewsForm({ user, addNews }) {\r\n  let [showForm, setShowForm] = useState(false);\r\n  let [title, setTitle] = useState('');\r\n  let [text, setText] = useState('');\r\n\r\n  return(\r\n    <div className=\"newsForm\">\r\n      <CustomButton\r\n        label={ showForm ? 'Скрыть' : 'Добавить новость' }\r\n        className=\"newsForm__addButton\"\r\n        onClick={ () => setShowForm(prev => !prev) }\r\n      />\r\n      {showForm &&\r\n        <div className=\"newsForm__form\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Заголовок\"\r\n            className=\"newsForm__input\"\r\n            onChange= { e => setTitle(e.target.value) }\r\n          />\r\n          <textarea \r\n            className=\"newsForm__textarea\"\r\n            placeholder=\"Текст новости\"\r\n            onChange= { e => setText(e.target.value) }\r\n          />\r\n          <CustomButton\r\n            label=\"Добавить\"\r\n            className=\"newsForm__submitButton\"\r\n            onClick={ () => {\r\n              addNews(title, text, user.username);\r\n              setShowForm(false);\r\n            } }\r\n          />\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.auth\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addNews: (title, text, author) => dispatch(addNews(title, text, author))\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NewsForm)","import { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport NewsArticle from './NewsArticle';\r\nimport NewsForm from './NewsForm';\r\n\r\nimport '../style/News.scss';\r\n\r\n function News({ articles, user }) {\r\n   let [articlesList, setArticlesList] = useState([]);\r\n\r\n   useEffect(() => {\r\n     let tempArticles = [];\r\n     articles.filter((el) => {\r\n      return el.isApproved || el.author === user.username || user.role === 'admin';\r\n    })\r\n    .forEach((el, i) => {\r\n      tempArticles.push(<NewsArticle article={ el } key={ i } newsId={ i } />)\r\n     });\r\n     setArticlesList(tempArticles);\r\n   }, [articles, user])\r\n\r\n   function search(value) {\r\n    let tempArticles = [];\r\n    articles.filter(el => {\r\n      return el.title.includes(value) || el.text.includes(value)\r\n    })\r\n    .forEach((el, i) => {\r\n      tempArticles.push(<NewsArticle article={ el } key={ i } newsId={ i } />)\r\n     });\r\n     setArticlesList(tempArticles);\r\n   }\r\n\r\n  return (\r\n    <div className=\"news\">\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Поиск по новостям\"\r\n        className=\"news__search\"\r\n        onChange={ e => search(e.target.value) }\r\n      />\r\n      { user.isAuth && <NewsForm /> }\r\n      { articlesList }\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    articles: state.news,\r\n    user: state.auth\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(News)","import { BrowserRouter as Router, Switch, Route} from 'react-router-dom'\nimport Navbar from '../src/components/Navbar';\nimport Home from '../src/components/Home';\nimport News from '../src/components/News';\n\nfunction App() {\n  return (\n    <Router>\n      <div className=\"App\">\n        <Navbar/>\n        <Switch>\n          <Route path=\"/news-with-redux/news\">\n            <News />\n          </Route>\n          <Route path=\"/news-with-redux\">\n            <Home />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import { combineReducers } from 'redux'\r\n\r\nconst initialAuth = {\r\n  username: '',\r\n  role: '',\r\n  isAuth: false,\r\n  error: ''\r\n}\r\n\r\nconst initialNews = [\r\n  {\r\n    title: 'Эту новость написал админ',\r\n    date: 'date',\r\n    text: 'И ее не надо было одобрять',\r\n    isApproved: true,\r\n    author: 'admin'\r\n  },\r\n  {\r\n    title: 'Эту новость писал Боб',\r\n    date: 'date',\r\n    text: 'И она была одобрена',\r\n    isApproved: true,\r\n    author: 'bob'\r\n  },\r\n  {\r\n    title: 'И эту новость тоже писал Боб',\r\n    date: 'date',\r\n    text: 'Но она не была одобрена',\r\n    isApproved: false,\r\n    author: 'bob'\r\n  }\r\n]\r\n\r\n\r\nfunction auth(state = initialAuth, action) {\r\n  switch (action.type) {\r\n    case 'LOGIN':\r\n      return {\r\n        ...state, \r\n        username: action.payload.username, \r\n        role: action.payload.role, \r\n        isAuth: action.payload.isAuth,\r\n        error: action.payload.error\r\n      }\r\n    case 'LOGOUT':\r\n      return {\r\n        ...state, \r\n        username: '', \r\n        role: '', \r\n        isAuth: false,\r\n        error: ''\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nfunction news(state = initialNews, action) {\r\n  switch (action.type) {\r\n    case 'ADD_NEWS':\r\n      return [\r\n        ...state,\r\n        {\r\n          title: action.payload.title,\r\n          date: action.payload.date,\r\n          text: action.payload.text,\r\n          author: action.payload.author,\r\n          isApproved : action.payload.isApproved\r\n        }\r\n      ]\r\n    case 'APPROVE_NEWS':\r\n      return state.map((el, i)=> {\r\n        if(i === action.payload) {\r\n          return {...el, isApproved: true}\r\n        } else {\r\n          return el;\r\n        }\r\n      })\r\n      case 'DELETE_NEWS':\r\n        return state.filter((el, i) => i !== action.payload)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default combineReducers({auth, news})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './style/index.scss';\nimport { Provider } from 'react-redux';\nimport { createStore } from 'redux';\nimport reducer from './redux/reducers';\n\nconst store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\n//const store = createStore(reducer);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}